
<div class="card">
<h3 class="card-header text-center font-weight-bold text-uppercase py-4">MANAGE EXPENSES</h3>
<div class="card-body">
<div id="table" class="table-editable">
  <span class="table-add float-right mb-3 mr-2">
    <a class="text-success" (click)="add()">
      <i class="fa fa-plus"></i>
    </a>
  </span> 
  <table class="table table-bordered table-responsive-md table-striped text-center">
    <tr>
      <th class="text-center">Category</th>
      <th class="text-center">Department</th>
      <th class="text-center">Amount</th>
      <th class="text-center">Created At</th>
      <th class="text-center">STATUS</th>
      <th class="text-center">Actions</th>
    </tr>
    <tr *ngFor="let expense of expenseList; let i = index">
      <td>
        <select class="form-control"  [(ngModel)]="expense.category_id">
          <option *ngFor="let item of categoryList" [ngValue]="item.id">{{item.name}}
          </option>
        </select>
      </td>
      <td>
        <select class="form-control"  [(ngModel)]="expense.dept_id">
          <option *ngFor="let item of deptList" [ngValue]="item.id">{{item.name}}
          </option>
        </select>
      </td>
      <td>
        <input type="text" class="form-control" name="expense_amount" [(ngModel)]="expense.amount" >
      </td>
      <td>
        <span contenteditable="false">{{expense.created_at | date}}</span>
      </td>                      
      <td>
        <span *ngIf="!isAccountant" contenteditable="false">PENDING</span>
        <select *ngIf="isAccountant" class="form-control" [(ngModel)]="expense.status">
          <option>PENDING</option>
          <option>APPROVED</option>
          <option>REJECTED</option>
        </select>
      </td>
      <td *ngIf="!expense.is_create">
        <span class="table-up">
          <a class="indigo-text">
            <i class="fa fa-save" (click)="updateExpense(i, expense)" aria-hidden="true"></i>
          </a>
        </span>
        <span class="table-down">
          <a class="indigo-text">
            <i class="fa fa-times ml-3" (click)="openConfirmationDialog(i, expense)" aria-hidden="true"></i>
          </a>
        </span>
        <span class="table-down">
          <a class="indigo-text">
            <i class="fa fa-file-text-o ml-3" (click)="openConfirmationDialog(i, expense, 'approval')" aria-hidden="true"></i>
          </a>
        </span>
      </td>
      <td *ngIf="expense.is_create">
        <span class="table-up">
          <a class="indigo-text">
            <i class="fa fa-save" aria-hidden="true" (click)="saveExpense(expense, i)"></i>
          </a>
        </span>
        <span class="table-down">
          <a class="indigo-text">
            <i class="fa fa-times ml-3" (click)="expenseList.splice(i, 1)" aria-hidden="true"></i>
          </a>
        </span>
      </td>
    </tr>
  </table>
</div>
</div>
</div>
<!-- Editable table -->


